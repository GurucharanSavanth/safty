<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - Citizen Safety Platform</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/main.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Inter', sans-serif; background: linear-gradient(135deg, #0a0f1e 0%, #1a1f35 100%); color: #f1f5f9; min-height: 100vh; padding: 20px; }
    .dashboard-container { max-width: 1600px; margin: 0 auto; }
    .header { background: rgba(30, 41, 59, 0.8); backdrop-filter: blur(20px); border: 2px solid rgba(51, 65, 85, 0.5); border-radius: 20px; padding: 32px; margin-bottom: 32px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 16px; }
    .header-title h1 { font-size: 2rem; font-weight: 800; margin-bottom: 8px; }
    .header-subtitle { color: #94a3b8; font-size: 0.875rem; }
    .header-actions { display: flex; gap: 12px; flex-wrap: wrap; }
    .action-btn { padding: 12px 24px; border: none; border-radius: 12px; font-weight: 700; font-size: 0.875rem; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; gap: 8px; text-decoration: none; white-space: nowrap; }
    .action-btn.primary { background: linear-gradient(135deg, #3b82f6, #2563eb); color: white; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4); }
    .action-btn.primary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(59, 130, 246, 0.6); }
    .action-btn.success { background: linear-gradient(135deg, #22c55e, #16a34a); color: white; box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4); }
    .action-btn.success:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(34, 197, 94, 0.6); }
    .action-btn.warning { background: linear-gradient(135deg, #f59e0b, #d97706); color: white; box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4); }
    .action-btn.warning:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(245, 158, 11, 0.6); }
    .action-btn.secondary { background: rgba(51, 65, 85, 0.5); border: 2px solid #475569; color: #f1f5f9; }
    .action-btn.secondary:hover { background: rgba(71, 85, 105, 0.5); transform: translateY(-2px); }
    .tab-navigation { display: flex; gap: 8px; margin-bottom: 32px; border-bottom: 2px solid rgba(51, 65, 85, 0.5); padding-bottom: 4px; overflow-x: auto; }
    .tab-btn { padding: 12px 24px; background: none; border: none; color: #94a3b8; font-weight: 600; cursor: pointer; transition: all 0.3s; border-radius: 8px 8px 0 0; white-space: nowrap; }
    .tab-btn:hover { color: #f1f5f9; background: rgba(51, 65, 85, 0.3); }
    .tab-btn.active { color: #3b82f6; background: rgba(59, 130, 246, 0.1); border-bottom: 3px solid #3b82f6; }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 32px; }
    .stat-card { background: rgba(30, 41, 59, 0.8); border: 2px solid rgba(51, 65, 85, 0.5); border-radius: 16px; padding: 24px; transition: all 0.3s; }
    .stat-card:hover { transform: translateY(-4px); box-shadow: 0 12px 32px rgba(0, 0, 0, 0.3); }
    .stat-value { font-size: 2.5rem; font-weight: 800; margin-bottom: 8px; }
    .stat-label { color: #94a3b8; font-weight: 600; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px; }
    .section-card { background: rgba(30, 41, 59, 0.8); border: 2px solid rgba(51, 65, 85, 0.5); border-radius: 20px; padding: 32px; margin-bottom: 32px; }
    .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; flex-wrap: wrap; gap: 12px; }
    .section-title { font-size: 1.5rem; font-weight: 700; }
    .table-container { overflow-x: auto; }
    table { width: 100%; border-collapse: collapse; }
    th { text-align: left; padding: 12px; background: rgba(51, 65, 85, 0.5); font-weight: 700; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid rgba(71, 85, 105, 0.5); }
    td { padding: 16px 12px; border-bottom: 1px solid rgba(51, 65, 85, 0.3); }
    tr:hover { background: rgba(51, 65, 85, 0.2); }
    .role-badge { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; }
    .role-superadmin { background: #dc2626; color: white; }
    .role-admin { background: #3b82f6; color: white; }
    .role-manager { background: #8b5cf6; color: white; }
    .role-viewer { background: #6b7280; color: white; }
    .status-badge { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: 700; }
    .status-active { background: #22c55e; color: white; }
    .status-inactive { background: #6b7280; color: white; }
    .status-pending { background: #f59e0b; color: white; }
    .status-in-progress { background: #3b82f6; color: white; }
    .status-resolved { background: #22c55e; color: white; }
    .table-actions { display: flex; gap: 8px; }
    .icon-btn { padding: 6px 12px; border: none; border-radius: 6px; cursor: pointer; font-size: 0.875rem; transition: all 0.3s; }
    .icon-btn.edit { background: #3b82f6; color: white; }
    .icon-btn.delete { background: #ef4444; color: white; }
    .icon-btn.toggle { background: #f59e0b; color: white; }
    .icon-btn:hover { transform: scale(1.05); opacity: 0.9; }
    .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(10px); z-index: 10000; align-items: center; justify-content: center; }
    .modal.active { display: flex; }
    .modal-content { background: #1e293b; border: 2px solid #334155; border-radius: 20px; padding: 32px; max-width: 600px; width: 90%; max-height: 90vh; overflow-y: auto; }
    .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
    .modal-title { font-size: 1.5rem; font-weight: 700; }
    .close-btn { background: none; border: none; color: #94a3b8; font-size: 1.5rem; cursor: pointer; transition: all 0.3s; }
    .close-btn:hover { color: #f1f5f9; transform: rotate(90deg); }
    .form-group { margin-bottom: 20px; }
    .form-label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 0.875rem; color: #cbd5e1; }
    .form-input, .form-select, textarea.form-input { width: 100%; padding: 12px; background: rgba(51, 65, 85, 0.5); border: 2px solid #475569; border-radius: 8px; color: #f1f5f9; font-size: 1rem; transition: all 0.3s; font-family: inherit; }
    .form-input:focus, .form-select:focus, textarea.form-input:focus { outline: none; border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1); }
    .form-checkbox { margin-right: 8px; }
    .form-actions { display: flex; gap: 12px; justify-content: flex-end; margin-top: 24px; }
    .config-card { background: rgba(30, 41, 59, 0.8); border: 2px solid rgba(51, 65, 85, 0.5); border-radius: 16px; padding: 24px; margin-bottom: 20px; }
    .config-title { font-size: 1.25rem; font-weight: 700; margin-bottom: 16px; }
    .config-row { display: flex; align-items: center; justify-content: space-between; padding: 12px; background: rgba(51, 65, 85, 0.3); border-radius: 8px; margin-bottom: 12px; }
    .config-info { display: flex; align-items: center; gap: 12px; }
    .config-icon { font-size: 1.5rem; }
    .toggle-switch { position: relative; width: 60px; height: 30px; background: #475569; border-radius: 30px; cursor: pointer; transition: all 0.3s; }
    .toggle-switch.active { background: #22c55e; }
    .toggle-switch::after { content: ''; position: absolute; top: 3px; left: 3px; width: 24px; height: 24px; background: white; border-radius: 50%; transition: all 0.3s; }
    .toggle-switch.active::after { left: 33px; }
    @media (max-width: 768px) {
      .header { padding: 20px; }
      .header-title h1 { font-size: 1.5rem; }
      .action-btn { padding: 10px 16px; font-size: 0.75rem; }
      .stats-grid { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); }
      .stat-value { font-size: 1.75rem; }
      .section-card { padding: 20px; }
      .modal-content { padding: 20px; }
      table { font-size: 0.875rem; }
      th, td { padding: 8px; }
    }
  </style>
</head>
<body>

  <div class="dashboard-container">
    <!-- Header -->
    <div class="header">
      <div class="header-title">
        <h1>üõ°Ô∏è Admin Dashboard</h1>
        <p class="header-subtitle">Comprehensive System Management</p>
      </div>

      <div class="header-actions">
        <button class="action-btn warning" onclick="openConfigModal()">‚öôÔ∏è Config</button>
        <button class="action-btn success" onclick="openReportGenerationModal()">üìä Generate Report</button>
        <button class="action-btn primary" onclick="openCreateUserModal()">üë§ Create User</button>
        <a href="heatmap-page.html" class="action-btn secondary">üó∫Ô∏è Map</a>
        <button class="action-btn secondary" onclick="handleLogout()">üö™ Logout</button>
      </div>
    </div>

    <!-- Tab Navigation -->
    <div class="tab-navigation">
      <button class="tab-btn active" onclick="switchTab('overview')">üìä Overview</button>
      <button class="tab-btn" onclick="switchTab('users')">üë• Users</button>
      <button class="tab-btn" onclick="switchTab('roles')">üé≠ Roles</button>
      <button class="tab-btn" onclick="switchTab('reports')">üìã Reports</button>
      <button class="tab-btn" onclick="switchTab('analytics')">üìà Analytics</button>
    </div>

    <!-- Tab: Overview -->
    <div id="tab-overview" class="tab-content active">
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-value" id="totalReports" style="color: #3b82f6;">0</div>
          <div class="stat-label">Total Reports</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="totalUsers" style="color: #22c55e;">0</div>
          <div class="stat-label">Total Users</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="pendingReports" style="color: #f59e0b;">0</div>
          <div class="stat-label">Pending</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="activeUsers" style="color: #8b5cf6;">0</div>
          <div class="stat-label">Active Users</div>
        </div>
      </div>

      <div class="section-card">
        <div class="section-header">
          <h2 class="section-title">üìã Recent Activity</h2>
        </div>
        <div id="recentActivity">Loading...</div>
      </div>
    </div>

    <!-- Tab: User Management -->
    <div id="tab-users" class="tab-content">
      <div class="section-card">
        <div class="section-header">
          <h2 class="section-title">üë• User Management</h2>
          <button class="action-btn primary" onclick="openCreateUserModal()">‚ûï Add User</button>
        </div>

        <div class="table-container">
          <table id="usersTable">
            <thead>
              <tr>
                <th>Username</th>
                <th>Full Name</th>
                <th>Role</th>
                <th>Status</th>
                <th>Last Login</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="usersTableBody">
              <tr>
                <td colspan="6" style="text-align: center; padding: 32px;">Loading...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Tab: Role Management -->
    <div id="tab-roles" class="tab-content">
      <div class="section-card">
        <div class="section-header">
          <h2 class="section-title">üé≠ Role Management</h2>
          <button class="action-btn primary" onclick="openCreateRoleModal()">‚ûï Create Custom Role</button>
        </div>

        <div style="margin-bottom: 24px;">
          <h3 style="font-size: 1.25rem; margin-bottom: 16px; color: #3b82f6;">System Roles</h3>
          <div id="systemRolesList" style="display: grid; gap: 16px;"></div>
        </div>

        <div>
          <h3 style="font-size: 1.25rem; margin-bottom: 16px; color: #22c55e;">Custom Roles</h3>
          <div id="customRolesList" style="display: grid; gap: 16px;"></div>
        </div>
      </div>
    </div>

    <!-- Tab: Reports -->
    <div id="tab-reports" class="tab-content">
      <div class="section-card">
        <div class="section-header">
          <h2 class="section-title">üìã All Reports</h2>
          <div style="display: flex; gap: 8px; flex-wrap: wrap;">
            <button class="action-btn success" onclick="exportReports()">üì• Export CSV</button>
            <button class="action-btn warning" onclick="refreshReports()">üîÑ Refresh</button>
          </div>
        </div>
        <div id="allReportsList" style="display: grid; gap: 12px;">Loading...</div>
      </div>
    </div>

    <!-- Tab: Analytics -->
    <div id="tab-analytics" class="tab-content">
      <div class="section-card">
        <div class="section-header">
          <h2 class="section-title">üìà Analytics & AI Reports</h2>
          <button class="action-btn primary" onclick="viewGeneratedReports()">üìä View Generated Reports</button>
        </div>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 32px;">
          <div class="stat-card">
            <div class="stat-value" id="totalGeneratedReports" style="color: #22c55e;">0</div>
            <div class="stat-label">AI Reports Generated</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="lastReportDate" style="color: #3b82f6; font-size: 1rem;">Never</div>
            <div class="stat-label">Last Generated</div>
          </div>
        </div>

        <div id="latestReportPreview" style="background: rgba(51, 65, 85, 0.3); padding: 24px; border-radius: 12px;">
          <h3 style="margin-bottom: 16px;">Latest AI Report Preview</h3>
          <div id="latestReportContent" style="color: #94a3b8;">
            No reports generated yet. Click "Generate Report" to create one.
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL: Config -->
  <div id="configModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">‚öôÔ∏è Configuration</h2>
        <button class="close-btn" onclick="closeModal('configModal')">√ó</button>
      </div>

      <div class="config-card">
        <h3 class="config-title">ü§ñ LLM Configuration</h3>

        <div class="config-row">
          <div class="config-info">
            <span class="config-icon">üî∑</span>
            <div>
              <div style="font-weight: 700;">LocalLLM GE (Gemini)</div>
              <div style="font-size: 0.875rem; color: #94a3b8;">Google Gemini API</div>
            </div>
          </div>
          <div class="toggle-switch" id="geminiToggle" onclick="toggleLLM('gemini')"></div>
        </div>

        <div class="form-group" id="geminiKeyGroup" style="display: none;">
          <label class="form-label">Gemini API Key</label>
          <input type="password" id="geminiApiKey" class="form-input" placeholder="Enter API key">
        </div>

        <div class="config-row">
          <div class="config-info">
            <span class="config-icon">üü¢</span>
            <div>
              <div style="font-weight: 700;">LocalLLM CG (ChatGPT)</div>
              <div style="font-size: 0.875rem; color: #94a3b8;">OpenAI ChatGPT API</div>
            </div>
          </div>
          <div class="toggle-switch" id="chatgptToggle" onclick="toggleLLM('chatgpt')"></div>
        </div>

        <div class="form-group" id="chatgptKeyGroup" style="display: none;">
          <label class="form-label">ChatGPT API Key</label>
          <input type="password" id="chatgptApiKey" class="form-input" placeholder="Enter API key">
        </div>
      </div>

      <div class="form-actions">
        <button class="action-btn secondary" onclick="closeModal('configModal')">Cancel</button>
        <button class="action-btn success" onclick="saveConfig()">üíæ Save</button>
      </div>
    </div>
  </div>

  <!-- MODAL: Report Generation -->
  <div id="reportGenerationModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">üìä AI Report Generation</h2>
        <button class="close-btn" onclick="closeModal('reportGenerationModal')">√ó</button>
      </div>

      <div class="form-group">
        <label class="form-label">Report Type</label>
        <select id="reportType" class="form-select">
          <option value="comprehensive">Comprehensive Analysis (30 days)</option>
          <option value="custom">Custom Date Range</option>
        </select>
      </div>

      <div class="form-group" id="dateRangeGroup" style="display: none;">
        <label class="form-label">Days to Analyze</label>
        <input type="number" id="reportDays" class="form-input" value="30" min="1" max="365">
      </div>

      <div class="config-card">
        <h3 class="config-title">‚è∞ Automated Generation</h3>

        <div class="config-row">
          <div class="config-info">
            <span class="config-icon">üìÖ</span>
            <div><div style="font-weight: 700;">Enable Automation</div></div>
          </div>
          <div class="toggle-switch" id="automationToggle" onclick="toggleAutomation()"></div>
        </div>

        <div id="automationOptions" style="display: none; margin-top: 16px;">
          <div class="config-row">
            <div class="config-info">
              <span class="config-icon">üìä</span>
              <div style="font-weight: 600;">30-Day Reports</div>
            </div>
            <div class="toggle-switch" id="days30Toggle" onclick="toggleInterval('days30')"></div>
          </div>

          <div class="config-row">
            <div class="config-info">
              <span class="config-icon">üìà</span>
              <div style="font-weight: 600;">90-Day Reports</div>
            </div>
            <div class="toggle-switch" id="days90Toggle" onclick="toggleInterval('days90')"></div>
          </div>

          <div class="config-row">
            <div class="config-info">
              <span class="config-icon">üìâ</span>
              <div style="font-weight: 600;">365-Day Reports</div>
            </div>
            <div class="toggle-switch" id="days365Toggle" onclick="toggleInterval('days365')"></div>
          </div>
        </div>
      </div>

      <div class="form-actions">
        <button class="action-btn secondary" onclick="closeModal('reportGenerationModal')">Cancel</button>
        <button class="action-btn success" onclick="generateReport()">üöÄ Generate</button>
      </div>
    </div>
  </div>

  <!-- MODAL: User Management -->
  <div id="userModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="userModalTitle">üë§ Create User</h2>
        <button class="close-btn" onclick="closeModal('userModal')">√ó</button>
      </div>

      <form id="userForm">
        <input type="hidden" id="userId">

        <div class="form-group">
          <label class="form-label">Username *</label>
          <input type="text" id="username" class="form-input" required>
        </div>

        <div class="form-group" id="passwordGroup">
          <label class="form-label">Password *</label>
          <input type="password" id="password" class="form-input" required>
        </div>

        <div class="form-group">
          <label class="form-label">Full Name</label>
          <input type="text" id="fullName" class="form-input">
        </div>

        <div class="form-group">
          <label class="form-label">Email</label>
          <input type="email" id="email" class="form-input">
        </div>

        <div class="form-group">
          <label class="form-label">Phone</label>
          <input type="tel" id="phone" class="form-input">
        </div>

        <div class="form-group">
          <label class="form-label">Role *</label>
          <select id="role" class="form-select" required>
            <option value="viewer">Viewer</option>
            <option value="manager">Manager</option>
            <option value="admin">Administrator</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Department</label>
          <input type="text" id="department" class="form-input">
        </div>

        <div class="form-group">
          <label>
            <input type="checkbox" id="isActive" class="form-checkbox" checked>
            <span class="form-label" style="display: inline;">Active User</span>
          </label>
        </div>

        <div class="form-actions">
          <button type="button" class="action-btn secondary" onclick="closeModal('userModal')">Cancel</button>
          <button type="submit" class="action-btn success">üíæ Save User</button>
        </div>
      </form>
    </div>
  </div>

  <!-- MODAL: Role Management -->
  <div id="roleModal" class="modal">
    <div class="modal-content" style="max-width: 700px;">
      <div class="modal-header">
        <h2 class="modal-title" id="roleModalTitle">üé≠ Create Custom Role</h2>
        <button class="close-btn" onclick="closeModal('roleModal')">√ó</button>
      </div>

      <form id="roleForm">
        <input type="hidden" id="roleId">

        <div class="form-group">
          <label class="form-label">Role Key *</label>
          <input type="text" id="roleKey" class="form-input" placeholder="e.g., field_agent" required>
          <small style="color: #94a3b8; font-size: 0.75rem;">Lowercase letters and underscores only</small>
        </div>

        <div class="form-group">
          <label class="form-label">Role Label *</label>
          <input type="text" id="roleLabel" class="form-input" placeholder="e.g., Field Agent" required>
        </div>

        <div class="form-group">
          <label class="form-label">Description</label>
          <textarea id="roleDescription" class="form-input" rows="3"></textarea>
        </div>

        <div class="form-group">
          <label class="form-label">Permissions *</label>
          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; padding: 12px; background: rgba(51, 65, 85, 0.3); border-radius: 8px;">
            <label style="display: flex; align-items: center; gap: 8px;">
              <input type="checkbox" class="role-permission" value="create"> Create
            </label>
            <label style="display: flex; align-items: center; gap: 8px;">
              <input type="checkbox" class="role-permission" value="read" checked> Read
            </label>
            <label style="display: flex; align-items: center; gap: 8px;">
              <input type="checkbox" class="role-permission" value="update"> Update
            </label>
            <label style="display: flex; align-items: center; gap: 8px;">
              <input type="checkbox" class="role-permission" value="delete"> Delete
            </label>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Report Access</label>
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; padding: 12px; background: rgba(51, 65, 85, 0.3); border-radius: 8px;">
            <label><input type="checkbox" class="role-report-access" value="police"> üöî Police</label>
            <label><input type="checkbox" class="role-report-access" value="medical"> üöë Medical</label>
            <label><input type="checkbox" class="role-report-access" value="infrastructure"> üèóÔ∏è Infrastructure</label>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Report Limit</label>
          <input type="number" id="roleReportLimit" class="form-input" value="100" min="0">
        </div>

        <div class="form-group">
          <label class="form-label">Advanced Capabilities</label>
          <div style="display: grid; gap: 8px; padding: 12px; background: rgba(51, 65, 85, 0.3); border-radius: 8px;">
            <label><input type="checkbox" id="roleCanCreateUsers"> Can Create Users</label>
            <label><input type="checkbox" id="roleCanDeleteUsers"> Can Delete Users</label>
            <label><input type="checkbox" id="roleCanModifyRoles"> Can Modify Roles</label>
            <label><input type="checkbox" id="roleCanAccessConfig"> Can Access Config</label>
            <label><input type="checkbox" id="roleCanGenerateReports"> Can Generate AI Reports</label>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Dashboard Access</label>
          <select id="roleDashboardAccess" class="form-select">
            <option value="minimal">Minimal</option>
            <option value="limited" selected>Limited</option>
            <option value="full">Full</option>
          </select>
        </div>

        <div class="form-actions">
          <button type="button" class="action-btn secondary" onclick="closeModal('roleModal')">Cancel</button>
          <button type="submit" class="action-btn success">üíæ Save Role</button>
        </div>
      </form>
    </div>
  </div>

  <!-- MODAL: Report Details -->
  <div id="reportDetailModal" class="modal">
    <div class="modal-content" style="max-width: 900px;">
      <div class="modal-header">
        <h2 class="modal-title" id="reportDetailTitle">üìã Report Details</h2>
        <button class="close-btn" onclick="closeModal('reportDetailModal')">√ó</button>
      </div>

      <div id="reportDetailContent">
        <div style="background: rgba(51, 65, 85, 0.3); padding: 16px; border-radius: 8px; margin-bottom: 20px;">
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
            <div>
              <strong style="color: #cbd5e1;">Report ID:</strong>
              <div id="detailReportId" style="font-size: 1.1rem; margin-top: 4px;">-</div>
            </div>
            <div>
              <strong style="color: #cbd5e1;">Type:</strong>
              <div id="detailReportType" style="font-size: 1.1rem; margin-top: 4px;">-</div>
            </div>
          </div>
        </div>

        <div id="statusUpdateSection" style="background: rgba(51, 65, 85, 0.3); padding: 16px; border-radius: 8px; margin-bottom: 20px;">
          <strong style="color: #cbd5e1;">Status:</strong>
          <div style="display: flex; gap: 12px; margin-top: 12px; align-items: center; flex-wrap: wrap;">
            <span id="currentStatus" style="padding: 8px 16px; border-radius: 20px; font-weight: 700;">-</span>
            <select id="statusSelect" class="form-select" style="max-width: 200px;">
              <option value="pending">Pending</option>
              <option value="in-progress">In Progress</option>
              <option value="resolved">Resolved</option>
            </select>
            <button class="action-btn success" onclick="updateReportStatus()" style="padding: 8px 16px;">Update Status</button>
			<!-- ‚úÖ ADD THIS: Delete Button -->
			<button onclick="deleteCurrentReport()" 
					style="padding: 8px 16px; background: linear-gradient(135deg, #ef4444, #dc2626); border: none; border-radius: 8px; color: white; font-weight: 700; cursor: pointer; display: flex; align-items: center; gap: 6px; transition: all 0.3s;"
					onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(239, 68, 68, 0.4)'"
					onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
			  üóëÔ∏è Delete Report
			</button>
			
          </div>
		  
        </div>

        <div id="locationSection" style="background: rgba(51, 65, 85, 0.3); padding: 16px; border-radius: 8px; margin-bottom: 20px;">
          <strong style="color: #cbd5e1;">üìç Location:</strong>
          <div id="detailLocation" style="margin-top: 8px; color: #94a3b8;">-</div>
          <div id="geotagSection" style="margin-top: 12px; display: none;">
            <a id="googleMapsLink" href="#" target="_blank" class="action-btn primary" style="padding: 8px 16px; display: inline-flex;">
              üó∫Ô∏è Open in Google Maps
            </a>
          </div>
        </div>

        <div style="background: rgba(51, 65, 85, 0.3); padding: 16px; border-radius: 8px; margin-bottom: 20px;">
          <strong style="color: #cbd5e1;">Description:</strong>
          <div id="detailDescription" style="margin-top: 8px; color: #f1f5f9; line-height: 1.6;">-</div>
        </div>

        <div id="imagesSection" style="background: rgba(51, 65, 85, 0.3); padding: 16px; border-radius: 8px; margin-bottom: 20px; display: none;">
          <strong style="color: #cbd5e1;">üì∏ Images:</strong>
          <div id="detailImages" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 12px; margin-top: 12px;"></div>
        </div>

        <div id="audioSection" style="background: rgba(51, 65, 85, 0.3); padding: 16px; border-radius: 8px; margin-bottom: 20px; display: none;">
          <strong style="color: #cbd5e1;">üé§ Audio Recording:</strong>
          <audio id="detailAudio" controls style="width: 100%; margin-top: 12px;"></audio>
        </div>

        <div style="background: rgba(51, 65, 85, 0.3); padding: 16px; border-radius: 8px;">
          <strong style="color: #cbd5e1;">Metadata:</strong>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 12px; font-size: 0.875rem;">
            <div>
              <strong>Created:</strong>
              <div id="detailCreatedAt" style="color: #94a3b8;">-</div>
            </div>
            <div id="detailUpdatedAtSection" style="display: none;">
              <strong>Updated:</strong>
              <div id="detailUpdatedAt" style="color: #94a3b8;">-</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL: Generated Reports Viewer -->
  <div id="generatedReportsModal" class="modal">
    <div class="modal-content" style="max-width: 1000px;">
      <div class="modal-header">
        <h2 class="modal-title">üìä AI Generated Reports</h2>
        <button class="close-btn" onclick="closeModal('generatedReportsModal')">√ó</button>
      </div>
      <div id="generatedReportsList"></div>
    </div>
  </div>

  <script src="js/utils.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/profile-manager.js"></script>
  <script src="js/admin-dashboard.js"></script>

</body>
</html>
